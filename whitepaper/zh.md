# 泰德金融鏈 Tidetime Chain
- 異質性金融資產可程式化管理平台  
- v1.0.1
- 2021.10.05

# 目錄
- [技術背景](#技術背景)
- [設計概念](#設計概念)
- [原生代幣發行準則](#原生代幣發行準則)
- [分權制衡共識機制](#分權制衡共識機制)
  - [抵押金制度](#抵押金制度)
  - [共識流程](#共識流程)
  - [獎勵制度](#獎勵制度)
- [分散式代理機制](#分散式代理機制)
  - [元交易代理](#元交易代理)
  - [門限交易代理](#門限交易代理)
- [跨鏈通訊協議](#跨鏈通訊協議)
  - [Oracle](#Oracle)
  - [跨鏈資產移轉](#跨鏈資產移轉)
- [社群治理](#社群治理)
  - [版本管控](#版本管控)
  - [Tidetime Improvement Proposals](#tidetime-improvement-proposals)
- [技術展望](#技術展望)

# 技術背景
金融服務是近代經濟體系的重要元素，與人們生活密不可分。然而，金融業在世界各地都屬於政府管治的寡占事業，需要復雜和繁瑣的管理，即使是挟帶新技術的大型新創企業亦很難為這個行業帶來大規模變革。
這也是網際網路時代，許多人依舊無法獲得足夠的金融服務，普惠金融仍難以落實的原因之一。Tidetime Chain（後略稱 TTC）目的是設計一個由演算法決定規範，由用戶以平等身份一起組成的區塊鏈金融生態，任何形式的數位資產都可以託管以區塊鏈資產的型式在此生態系中流通。參與者可以架設空開發佈的節點，作為一間虛擬的銀行分行，貢獻閒置的算力運行金融服務平台並獲取獎勵，也可以作為金融服務商開發各式服務合約於平台上營業，甚至參與整項技術生態的發展與決策。TTC 的主要價值觀是創造一個平等、普及、互惠的金融生態，為促進世界變革做出積極貢獻。

# 設計概念
TTC 是基於泰德陽光集團去中心化網際網路技術，實現於區塊鏈上的基礎設施平台，旨在串聯全世界閒置的運算、儲存、網路資源建立一個互惠互利的雲端運算生態，具備以下特色：
1. 去中心化對等組織：TTC 的參與者身份沒有任何區別，參與者可以根據自身需求自由成為平台商、服務提供商、生態技術開發成員或是一般用戶，每種角色具備各自的權利與義務，由演算法進行監督，為恪盡義務的用戶帶來獎勵，為疏忽義務的用戶帶來懲罰。
2. 智能合約區塊鏈系統：TTC 使用公開透明的演算法取代過往以人治為主的金融服務模式，採用 Ethereum Virtual Machine 作為智能合約引擎，具備原生金流支援，系統運行穩定，介面一致易於整合等特性，開發者可藉此設計多樣化運行於區塊鏈上的服務。
3. 高安全性資產管理服務：區塊鏈技術由對等節點組成，不存在單點脆弱的問題，所有的資產都藉由用戶私鑰自行保管，然而這樣的方式在法人組織的應用上卻相當不符合需求。TTC 藉由門限簽名（Threshold Signature）技術提供多人共管帳戶機制，除了可以做為更安全的資產管理方案，也能在規避單點入侵風險的情況下，更安全地與外部系統建立連動。
4. 分權均衡激勵原則：對等節點網路技術在資訊傳播技術具有很大的效能瓶頸，TTC 在節點的共識取消過往區塊鏈常用的算力證明機制（Proof of Work）採用分權制衡（Checks and Balances, CAB）機制，共識過程中所有節點相互監督，藉由獎勵機制鼓勵節點參與共識，藉由懲罰機制阻止節點作惡。該機制節省算力競爭帶來的資源浪費，並帶來更高的交易速度與頻寬。
# 原生代幣發行準則
泰德金融鏈原生代幣為 Tidetime Token (TTT)，其作為使用 Tidetime Chain 服務之基礎手續費，TTT 作為手續費支付後將於系統內自然銷毀。
## 分配原則
Tidetime Chain 預發行 210,000,000,000 TTT（2,100 億）作為啟動基金，記錄於 Tidetime Chain 的創世區塊內。其中 10,000,000,000 TTT（100 億）做為生態獎勵，發放給在 Tidetime Chain 上持續發展去中心式應用服務的開發廠商，鼓勵服務開發商於 Tidetime Chain 上發展各種應用。19,999,900 TTT（1,999.99 萬）作為區塊獎勵，發放給提供運算、儲存、網路資源支持 Tidetime Chain 運行的參與者。其餘 199,980,000,000 TTT（1999.8 億）作為異質資產價值投影，須藉由抵押有價資產至鏈上進行解鎖。

# 分權制衡共識機制
TTC 藉由特殊的挖礦機制，每３秒產生新的區塊。參與共識的節點在抵押資產後會輪流成為提案者或稽核者，提案者會將檢驗通過的交易資訊打包成新的 Block 交由其他稽核者檢驗，檢驗無誤則將提案作為新的區塊進行廣播，任何節點若發現區塊資料異常，可檢舉提案節點進行懲罰，並獲得稽核獎勵。
## 抵押金制度
用戶須抵押至少 32 TTT 即能將自己的節點啟用為活躍礦工參與節點共識，共識節點須 24 小時確保運行。節點每次違規會扣無除保證金 10% 作為懲罰。
## 競選環節
1. Tidetime Chain 每 28,800 區塊為一個週期，每個週期會選出一名提案節點（Proposer），有意願的活躍礦工可登記參選。
2. 參選需承諾獎勵分潤比例，介於 0 - 100%。
3. 每抵押 32 TTT 可產生一票，用戶可投給屬意的礦工結點，得票數最高者則成為該區段時間的提案節點。
### 參考案例
1. 第 19 任週期（區塊 518,401 - 547,200）提案者競選開始。
2. CN1 參與競選並承諾分潤 20%，CN2 參與競選並承諾分潤 50%，CN3 參與競選並承諾分潤 80%。
3. V1 抵押 32,000 TTT 取得 1,000 票，將票投給 CN3。
4. 第 19 任提案節點競選 CN1 獲得 20,000 票，CN2 獲得 15,000 票，CN3 獲得 50,000 票。
5. CN3 獲選為第 19 任提案節點。

## 共識流程
節點共識分為提案、稽核、通過、駁回、逾期五種階段，每隔一段時間會從活躍節點中選出一提案節點，提案節點需要在時間內完成提案，超時或提交區塊資料異常將會被扣除 10% 抵押金作為懲罰。
### 提案
Tidetime Chain 在運作過程中，用戶會產生大量交易資料，每筆交易會永久銷毀不等數量的 TTT，銷毀 TTT 數量根據其運算複雜度成正比。提案節點需驗證交易內容是否正確後，每 3 秒整理一個區塊進行廣播提案。每個區塊大小必須控制大小於 4MB，並最多銷毀 5 TTT。其他參選的活躍節點亦能發起備選區塊提案，當提案節點未能在期限內提交區塊時採用。
### 稽核
節點收到廣播區塊提案後需針對區塊內容進行稽核，確認每筆交易中：
1. 區塊資訊與格式是否正確。
2. 每筆交易格式是否正確。
3. 交易的簽名資訊是否正確。
4. 交易者是否有足夠的 TTT 執行交易。
確認所有資料無誤，節點需要廣播通過區塊提案，否則廣播駁回區塊提案
### 通過
收到區塊提案後，各節點需要自行判斷區塊提案的正確性，若期間收到通過的票數高於駁回的票數，則通過該區塊提案。
### 駁回
收到區塊提案後，各節點需要自行判斷區塊提案的正確性，若期間收到駁回的票數高於通過的票數，則駁回該區塊提案。
### 逾期
在區塊週期內若無法通過新的區塊，則視為逾期事件，提案節點的 10% 押金將被扣除作為懲罰，罰金轉入挖礦獎勵池內。各節點需要廣播該週期內容合規的最高順位備選區塊提案，由最高得票提案作為該區塊。

## 獎勵制度
### 獎勵分配
提案節點任期為 28,800 個區塊，區塊獎勵會根據其承諾的分潤比例分配。參考案例如下：
1. 第 19 任週期（區塊 518,401 - 547,200）提案者競選開始。
2. CN1 參與競選並承諾分潤 20%，CN2 參與競選並承諾分潤 50%，CN3 參與競選並承諾分潤 80%。
3. V1 抵押 32,000 TTT 取得 1,000 票，將票投給 CN3。
4. 第 19 任提案節點競選 CN1 獲得 20,000 票，CN2 獲得 15,000 票，CN3 獲得 50,000 票。
5. CN3 獲選為第 19 任提案節點。
6. 第 19 週期區塊獎勵總和為 2,880 TTT，承諾分潤 80%。
7. CN3 取得 2,880 * (1 - 80%) = 576 TTT 挖礦獎勵。
8. V1 取得 2,880 * 80% * (1,000 / 50,000) = 46.08 TTT 挖礦獎勵。
### 獎勵計算
Tidetime Chain 的區塊獎勵採用價值動態平衡模式，每 28,800 區塊為一週期，根據節點保管的資產價值數、流通的 TTT 數、已發放的區塊獎勵數量進行調整。在相同的時間點，鏈上保管的資產價值愈高，生態交易愈活躍，區塊獎勵就愈高；而在相同的生態貢獻下，愈早期的發放的區塊獎勵愈高。計算模式如下：
1. Tidetime Chain 預發行 209,980,000,000 TTT（2,099.8 億）會發放於 BaseVault 合約，該合約會作為 TTT 流通數評估參考。
2. Tidetime Chain 預發行 19,999,900 TTT（1,999.99 萬）會發放於 MinerPool 合約，作為區塊獎勵池。
3. TTT 總流通量 CoTTT = BaseVault.totalReleased。
4. 可釋放價值估量 Rm = CoTTT / 100 { 210,000,000,000 > Rm > 10,000 }。
5. 礦池殘量 BoMP = balanceOf(MinerPool)。
6. 礦池開採量 Rs = CoMP = 19,999,900 - BoMP。
7. 區塊獎勵 BR = (Rm - Rs) / 1,000,000，BR 每隔 28,800 個區塊重新計算 { 21 > BR >= 0 | if BR < 0.0001 => BR = 0 }。
   1. 在前面數個區塊因 BaseVault 尚未流通，區塊獎勵 BR 為 0。
   2. 第 28,800 區塊抵押 ETH 換取 20,000,000 TTT 後，Rm = 200,000，Rs = 0，第 28,801 ~ 57,600 區塊獎勵 BR = 0.2。
   3. 第 57,601 區塊 Rs = 5,760，第 57,601 ~ 86,400 區塊獎勵 BR = 0.19424。
   4. 第 80,000 區塊抵押 ETH 換取 20,000,000 TTT 後，Rm = 400,000，Rs = 11354.112，第 86,401 ~ 115,200 區塊獎勵 BR = 0.388645888。

# 分散式代理機制
區塊鏈作為資產管理平台，仍存在部分問題造成用戶進入門檻，Tidetime Chain 提供了分散式代理機制解決以下問題：
1. DAPP 服務新用戶進入門檻高。
2. 區塊鏈資產保管取決於私鑰，難以兼顧安全性與易用性。
## 元交易代理

## 門限交易代理
### Tidetime Infallible Distributed Endorsment

## Oracle 代理

# 跨鏈通訊協議
## 跨鏈資產移轉
# 社群治理
## 版本管控
## Tidetime Improvement Proposals
# 技術展望
